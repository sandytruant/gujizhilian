# 古籍智联gujizhilian

古籍智联（暂时取了个很土的名字，大家可以想想这个工具叫什么）是一款待开发的中文输入法插件，目标是能够根据输入的部分拼音直接联想出可能的对应古籍中的完整语句，以解决当下主流输入法输入古籍中语句效率低下的问题。

## 10.9更新

- 不用Elasticsearch了，这个工具太大太重，不适合做输入法插件。使用更轻量的开源工具（**SQLite**）
- 用SQLite进行搜索见search文件夹
- 任务分解已更新

## 任务分解

### 1. 语料库准备

- 收集古代典籍（暂时只针对先秦到两汉的经典文学库），并将其整理为**如search/library.txt形式**的数据。

  - 古籍资料网站：https://ctext.org/zh

- 分词（可能需要）：将一段连续的文本拆分成一个个有意义的词语或者短语。
  - 分词工具：
    - https://github.com/jiaeyan/Jiayan（专用于古汉语的分词工具）
    - https://github.com/fxsjy/jieba（最常用的中文分词工具，但不一定适用于古汉语）

### 2. 查询匹配算法（后端）

- 精准匹配：查询哪些古籍语句直接包含所输入的拼音。例如：“hainei” => “海内存知己”。
  - 已初步实现，见search文件夹
- 模糊匹配：即所输入的拼音与目标语句存在偏差的时候，仍能提供合理的候选语句。可能用上的模糊匹配算法：
  - 编辑距离（Levenshtein Distance）：是用来衡量两个字符串之间差异的常用算法，即将一个字符串变为另一个字符串所需要的最少操作数（插入、删除、替换）。
    - 例如，用户输入“nihao”，实际想要输入的是“ninhao”，编辑距离为1，系统可以根据这一距离来推荐“您好”。
  - 模糊拼音映射表：把常见的错误拼音或近音拼音映射到正确的拼音。**目前这个方法感觉最可行。**
    - 例如，将“shi”和“si”归为同类，用户输入“si”的时候也可以联想到“是”。
  - Trie树、n-gram 语言模型、BM25、FST、深度学习模型

### 3. 用户接口（前端）

- 搭建网站：用户输入拼音，显示匹配的语句（简体和繁体）、引用出处、版本信息，提供复制按钮。
- 输入法插件：基于常用的开源输入法框架（如rime），实现输入法插件。
  - rime：https://github.com/rime
- 用户自定义语料库：用户可以导入自己的语料库（文本形式），从而个性化输入法所能联想到的古籍语句。

### 4. 论文撰写

需要：
- 调研主流输入法在输入古籍语句上的能力。
- 调研输入法常用的匹配算法。

## 近期目标

- 基于SQLite实现模糊匹配（模糊拼音映射表）
- 基于SQLite为古籍语句标注出处
- 收集古籍资料
- 搭建网站
- 学习如何把我们的扩展嵌入已有的输入法
